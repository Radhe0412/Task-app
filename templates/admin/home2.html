{% extends "admin/layout2.html" %}
{% block content %}

<div class="main-content">
  <section class="section">
    <div class="section-header">
      <h1>Dashboard Overview</h1>
    </div>

    <!-- ===== Statistics Cards ===== -->
    <div class="row">
      <div class="col-lg-3 col-md-6 col-sm-6">
        <div class="card card-statistic-1">
          <div class="card-icon bg-primary"><i class="fas fa-clipboard-list"></i></div>
          <div class="card-wrap">
            <div class="card-header"><h4>Today All Tasks</h4></div>
            <div class="card-body">{{total_today}}</div>
          </div>
        </div>
      </div>

      <div class="col-lg-3 col-md-6 col-sm-6">
        <div class="card card-statistic-1">
          <div class="card-icon bg-warning"><i class="fas fa-hourglass-half"></i></div>
          <div class="card-wrap">
            <div class="card-header"><h4>Today Pending Tasks</h4></div>
            <div class="card-body">{{pending}}</div>
          </div>
        </div>
      </div>

      <div class="col-lg-3 col-md-6 col-sm-6">
        <div class="card card-statistic-1">
          <div class="card-icon bg-success"><i class="fas fa-check-circle"></i></div>
          <div class="card-wrap">
            <div class="card-header"><h4>Today Completed Tasks</h4></div>
            <div class="card-body">{{completed}}</div>
          </div>
        </div>
      </div>

      <div class="col-lg-3 col-md-6 col-sm-6">
        <div class="card card-statistic-1">
          <div class="card-icon bg-info"><i class="fas fa-users"></i></div>
          <div class="card-wrap">
            <div class="card-header"><h4>Total Users</h4></div>
            <div class="card-body">{{total_users}}</div>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== All Tasks Table ===== -->
    <div class="card">
      <div class="card-header"><h4>All Tasks</h4></div>
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-striped">
            <thead>
              <tr>
                <th>#</th>
                <th>User Name</th>
            <th>Task Title</th>
            <th>Description</th>
            <th>Due Date</th>
            <th>Status</th>
            <th>Created_date</th>
            <th>Priority</th>
            </tr>
            </thead>
            <tbody>
  {% for j in data2 %}
  <tr>
    <td>{{ loop.index }}</td>
    <td>{{ j[0] }}</td>
    <td>{{ j[2] }}</td>
    <td>{{ j[3] }}</td>
    <td>{{ j[4].strftime('%d-%m-%Y') }}</td>

    {% if j[5] == 0 %}
      <td>Pending</td>
    {% else %}
      <td>Completed</td>
    {% endif %}

    <td>{{ j[6].strftime('%d-%m-%Y') }}</td>
    <td>{{ j[7] }}</td>
    <td>{{ j[8] }}</td>
  </tr>
  {% endfor %}
</tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- ===== Registered Users Table ===== -->
    <div class="card mt-4">
      <div class="card-header"><h4>Registered Users</h4></div>
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-striped">
            <thead>
            <tr>
            <th>Number</th>
            <th>Name</th>
            <th>Due Date</th>
            <th>Email</th>
            <th>Contact number</th>
            <th>Gender</th>
            <th>Status</th>
            
              </tr>
            </thead>
            <tbody>
              
          {% for j in data3 %}
          
          <tr>
            <td>{{loop.index}}</td>
            <td>{{j[1]}}</td>
            <td>{{j[3].strftime('%d-%m-%Y')}}</td>
            <td>{{j[4]}}</td>
            <td>{{j[6]}}</td>
            <td>{{j[7]}}</td>
            {% if j[5]==0 %}
            <td>Pending</td>
            {% else %}
            <td>Completed</td>
            {% endif %}
            
          </tr>
          {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- ===== Task Management Table ===== -->
    <div class="card mt-4">
      <div class="card-header"><h4>Manage Tasks</h4></div>
      <div class="card-body">
        <div class="table-responsive">
        <table class="table table-striped">
  <thead>
    <tr>
      <th>#</th>
      <th>User Name</th>
      <th>Task Title</th>
      <th>Description</th>
      <th>Due Date</th>
      <th>Status</th>
      <th>Created_date</th>
      <th>Priority</th>
      <th>Action</th>
    </tr>
  </thead>

  <tbody>
    {% for j in data2 %}
    <tr>
      <td>{{ loop.index }}</td>
      <td>{{ j[0] }}</td>
      <td>{{ j[2] }}</td>
      <td>{{ j[3] }}</td>
      <td>{{ j[4].strftime('%d-%m-%Y') }}</td>

      {% if j[5] == 0 %}
        <td>Pending</td>
      {% else %}
        <td>Completed</td>
      {% endif %}

      <td>{{ j[6].strftime('%d-%m-%Y') }}</td>
      <td>{{ j[7] }}</td>

      <td>
        <form action="{{ url_for('delete2_task', task_id=j[1]) }}" style="display:inline">
          <button type="submit" class="btn-danger">
            Delete
          </button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>

</table>

        </div>
      </div>
    </div>

  </section>
</div>

{% endblock %}
